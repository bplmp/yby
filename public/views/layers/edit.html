<div class="map-editor-container">
	<div class="editor-container">
		<div id="editor">
			<div class="editor-content">
				<div class="page-header layer-settings">
					<h2>Camada</h2>
					<textarea class="edit-title no-canvas" type="text" ng-model="layer.title" placeholder="Título da camada" mc-disable-enter="$event" spellcheck="false" autocorrect="off" autocapitalize="off" msd-elastic></textarea>
					<textarea class="edit-description no-canvas" type="text" ng-model="layer.description" mc-disable-enter="$event" placeholder="Descrição" spellcheck="false" autocorrect="off" autocapitalize="off" msd-elastic></textarea>
				</div>
				<div class="content">
					<div id="layer-edit">
						<ul class="map-editor-tabs layer-objects-nav">
							<li ng-class="layerObj('feature')"><a href="/layers/{{layer._id}}/edit/features">Features</a></li>
							<li ng-class="layerObj('content')"><a href="/layers/{{layer._id}}/edit/contents">Conteúdo</a></li>
						</ul>
						<div ng-controller="FeatureCtrl" ng-show="layerObj(objType)">
							<div id="layer-features" class="map-editor-subcontent">
								<div class="features-list">
									<p class="count">Você tem {{features.length}} features nesta camada.</p>
									<input class="filter" type="text" ng-model="search" placeholder="Encontrar na lista" />
									<p><a href="javascript:void(0);" class="button add-new" ng-click="new()">Adicionar nova</a></p>
									<ul class="obj-list">
										<li ng-repeat="feature in features | filter:search">
											<a href="/layers/{{layer._id}}/edit/features/{{feature._id}}">
												{{feature.title}}
											</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
						<div ng-controller="ContentCtrl" ng-show="layerObj(objType)">
							<div id="layer-content" class="map-editor-subcontent">
								<p class="count">Você tem {{contents.length}} conteúdos nesta camada.</p>
								<input class="filter" type="text" ng-model="search" placeholder="Encontrar na lista" />
								<p><a href="javascript:void(0);" class="button add-new" ng-click="new()">Adicionar novo</a></p>
								<ul class="obj-list">
									<li ng-repeat="item in contents | filter:search">
										<a href="/layers/{{layer._id}}/edit/contents/{{item._id}}">
											{{item.title}}
										</a>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<form class="layer-actions" ng-submit="save()">
			<a href="javascript:void(0);" class="button" ng-click="save()">Salvar</button>
			<a href="javascript:void(0);" class="button" ng-click="delete()">Remover</a>
			<a href="/layers/{{layer._id}}" class="button">Cancelar</a>
		</form>
	</div>
	<div ng-controller="FeatureEditCtrl" class="map-container object-editor" ng-class="{editing: editing}" ng-hide="sharedData.editingContent()">
		<div id="edit-feature" ng-show="editing" ng-animate="'top-down'">
			<form ng-submit="save()">
				<div class="feature-settings">
					<h3>Feature</h3>
					<textarea class="edit-title no-canvas" placeholder="Título da feature" ng-model="editing.title" mc-disable-enter="$event" spellcheck="false" autocorrect="off" autocapitalize="off" msd-elastic></textarea>
					<textarea class="edit-description no-canvas" placeholder="Descrição da feature" ng-model="editing.description" mc-disable-enter="$event" spellcheck="false" autocorrect="off" autocapitalize="off" msd-elastic></textarea>
				</div>
				<div class="feature-location">
					<div class="location-editor">
						<input class="geocode" type="text" ui-keypress="{'enter': 'geocode()'}" ng-model="_data.geocode" placeholder="Encontre uma localização" />
						<a href="javascript:void(0);" ng-click="geocode()">Buscar</a>
						<div class="geocode-results">
							<ul ng-repeat="result in _data.geocodeResults">
								<li ng-click="setNominatimFeature(result)">{{result.display_name}} <span class="lsf-icon">geo</span></li>
							</ul>
						</div>
						Latitude: <input ng-model="editing.geometry.coordinates[0]" ng-change="setMarker()" type="text" />
						Longitude: <input ng-model="editing.geometry.coordinates[1]" ng-change="setMarker()" type="text" />
					</div>
				</div>
				<div class="feature-actions">
					<a class="button" href="javascript:void(0);" ng-click="save()" ng-show="editing._id">Salvar</a>
					<a class="button" href="javascript:void(0);" ng-click="save()" ng-hide="editing._id">Adicionar nova feature</a>
					<a class="button" href="javascript:void(0);" ng-click="delete()" ng-show="editing._id">Remover</a>
					<a class="button" href="/layers/{{layer._id}}/edit/features">Cancelar</a>
				</div>
			</form>
		</div>
		<leaflet id="layer-map" center="map.world" tiles="map.tiles"></leaflet>
		<div class="add-marker-tip" ng-hide="marker">Clique no mapa para adicionar um marcador</div>
	</div>
	<div ng-controller="ContentEditCtrl" class="content-editor object-editor" ng-show="editing">
		<form>
			<h3>Conteúdo</h3>
			<textarea class="edit-title no-canvas" placeholder="Título" ng-model="editing.title" mc-disable-enter="$event" spellcheck="false" autocorrect="off" autocapitalize="off" msd-elastic></textarea>
			<div class="content-features">
				<h4>Features</h4>
				<select ng-model="editing.features" multiple>
					<option ng-repeat="feature in sharedData.features()" value="{{feature._id}}">{{feature.title}}</option>
				</select>
			</div>
			<div class="content-body">
				<textarea sir-trevor-editor ng-model="editing.sirTrevor"></textarea>
			</div>
			<div class="content-actions">
				<a class="button" href="javascript:void(0);" ng-click="save()" ng-show="editing._id">Salvar</a>
				<a class="button" href="javascript:void(0);" ng-click="save()" ng-hide="editing._id">Adicionar novo conteúdo</a>
				<a class="button" href="javascript:void(0);" ng-click="delete()" ng-show="editing._id">Remover</a>
				<a class="button" href="/layers/{{layer._id}}/edit/contents">Cancelar</a>
			</div>
		</form>
	</div>
</div>